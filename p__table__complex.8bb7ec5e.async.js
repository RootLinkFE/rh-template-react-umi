(self.webpackChunkrh_template_umi=self.webpackChunkrh_template_umi||[]).push([[600],{23314:function(ne,j,e){"use strict";var w=e(68699),p=e(52663),q=e(3911),I=e(94043),z=e.n(I),N=e(76570),B=e(57499),ee=e(83494),C=e(46128),O=e(61547),te=e(62925),V=e(67973),ae=e(31908),G=e(48148),Q=e(78199),m=e(67294),v=e(85893),H=function(T){var y=T.columns,r=y===void 0?[]:y,M=T.search,K=T.request,A=K===void 0?function(){return Promise.resolve({})}:K,U=T.debounceTime,Y=U===void 0?500:U,$=T.toolBarRender,J=(0,q.Z)(T,["columns","search","request","debounceTime","toolBarRender"]),L=(0,m.useRef)(),S=(0,m.useRef)(),X=(0,m.useRef)(),f=T.actionRef||X,o=(0,m.useRef)(),h=(0,Q.Z)(function(){var t;return(t=f.current)===null||t===void 0?void 0:t.reload(!0)},{wait:Y}),d=h.run,s=(0,m.useMemo)(function(){var t=M?M.filterType:"query";return r.map(function(a){var n=a.search,i=a.hideInSearch,c=a.valueType,u=c===void 0?"text":c,l=a.valueEnum,g=a.title,x=a.filterType,Z=x===void 0?t:x,E=a.fieldProps,W=E===void 0?{}:E,F=a.formItemProps,oe=F===void 0?{}:F;return n===!1||i===!0||u==="option"?!1:(0,p.Z)((0,p.Z)({},a),{},{filterType:Z,valueType:l?"select":u,fieldProps:(0,p.Z)((0,p.Z)({},W),{},{size:W.size||"large",suffix:(0,v.jsx)(N.Z,{"data-inspector-line":"109","data-inspector-column":"14","data-inspector-relative-path":"src/components/RhTable/index.tsx",onClick:function(){var D;(D=o.current)===null||D===void 0||D.call(o),d()},style:{cursor:"pointer",fontSize:22,color:"#9EA5B2"}}),placeholder:W.placeholder||(["date","dateTime","dateWeek","dateMonth","dateQuarter","dateYear","dateRange","dateTimeRange","time","timeRange","select","color"].includes(u)?"\u8BF7\u9009\u62E9".concat(g):"\u8BF7\u8F93\u5165".concat(g)),onKeyPress:function(D){if(D.key==="Enter"){var k;(k=o.current)===null||k===void 0||k.call(o),d()}}}),formItemProps:(0,p.Z)((0,p.Z)({},oe),{},{label:""})})}).filter(Boolean)},[r,d,M]),R=(0,m.useMemo)(function(){return s.filter(function(t){return t.filterType==="query"}).sort(function(t,a){return(t==null?void 0:t.order)-(a==null?void 0:a.order)})},[s]),_=(0,m.useMemo)(function(){return s.filter(function(t){return t.filterType==="light"}).sort(function(t,a){return(t==null?void 0:t.order)-(a==null?void 0:a.order)})},[s]),b=(0,m.useCallback)(function(t){var a=t.valueType,n=t.dataIndex,i=t.title,c=t.valueEnum,u=t.fieldProps,l=u===void 0?{size:"large"}:u;return a==="digit"?(0,v.jsx)(B.Z,{"data-inspector-line":"176","data-inspector-column":"8","data-inspector-relative-path":"src/components/RhTable/index.tsx",name:n,label:i,fieldProps:l},n):a==="date"?(0,v.jsx)(ee.Z,{"data-inspector-line":"187","data-inspector-column":"8","data-inspector-relative-path":"src/components/RhTable/index.tsx",name:n,label:i,fieldProps:l},n):a==="dateRange"?(0,v.jsx)(C.Z,{"data-inspector-line":"198","data-inspector-column":"8","data-inspector-relative-path":"src/components/RhTable/index.tsx",name:n,label:i,fieldProps:l},n):a==="select"||c?(0,v.jsx)(O.Z,{"data-inspector-line":"209","data-inspector-column":"8","data-inspector-relative-path":"src/components/RhTable/index.tsx",name:n,label:i,valueEnum:c,fieldProps:l},n):a==="text"||!a?(0,v.jsx)(te.Z,{"data-inspector-line":"221","data-inspector-column":"8","data-inspector-relative-path":"src/components/RhTable/index.tsx",name:n,label:i,fieldProps:(0,p.Z)({},l),footerRender:function(x){return o.current=x,(0,v.jsx)(v.Fragment,{})}},n):null},[]),P=(0,m.useCallback)(function(){var t=(0,w.Z)(z().mark(function a(n,i){var c,u,l,g,x;return z().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return l=((c=L.current)===null||c===void 0?void 0:c.getFieldsValue())||{},g=((u=S.current)===null||u===void 0?void 0:u.getFieldsValue())||{},x=(0,p.Z)((0,p.Z)({},l),g),f!=null&&f.current&&(f.current.pageInfo.params=x),E.next=6,A((0,p.Z)((0,p.Z)({},n),x),i,x);case 6:return E.abrupt("return",E.sent);case 7:case"end":return E.stop()}},a)}));return function(a,n){return t.apply(this,arguments)}}(),[f,A]);return(0,v.jsxs)("div",{"data-inspector-line":"254","data-inspector-column":"4","data-inspector-relative-path":"src/components/RhTable/index.tsx",className:"rh-table",children:[R.length>0&&(0,v.jsx)(V.Z,{"data-inspector-line":"257","data-inspector-column":"8","data-inspector-relative-path":"src/components/RhTable/index.tsx",className:"rh-table-query-filter-form",layoutType:"QueryFilter",span:4,submitter:!1,formRef:L,columns:R,onValuesChange:d}),$&&(0,v.jsx)("div",{"data-inspector-line":"269","data-inspector-column":"8","data-inspector-relative-path":"src/components/RhTable/index.tsx",className:"rh-table-toolbar",children:$().map(function(t){return t})}),_.length>0&&(0,v.jsx)(ae.Z,{"data-inspector-line":"275","data-inspector-column":"8","data-inspector-relative-path":"src/components/RhTable/index.tsx",className:"rh-table-light-filter-form",formRef:S,onFinish:d,children:_.map(function(t){return b(t)})}),(0,v.jsx)(G.ZP,(0,p.Z)((0,p.Z)({"data-inspector-line":"286","data-inspector-column":"6","data-inspector-relative-path":"src/components/RhTable/index.tsx"},J),{},{actionRef:f,columns:r,search:!1,toolBarRender:!1,request:P}))]})};j.Z=H},49109:function(ne,j,e){"use strict";e.r(j),e.d(j,{default:function(){return X}});var w=e(19597),p=e(2291),q=e(37482),I=e(3810),z=e(14643),N=e(92909),B=e(68699),ee=e(13753),C=e(48429),O=e(44742),te=e(25324),V=e(45733),ae=e(14943),G=e(74356),Q=e(94043),m=e.n(Q),v=e(67604),H=e(66498),re=e(22027),T=e(38584),y=e(67294),r=e(85893),M=function(o){var h=o.visible,d=h===void 0?!1:h,s=o.title,R=s===void 0?"":s,_=o.width,b=_===void 0?600:_,P=o.downloadUrl,t=P===void 0?"":P,a=o.onCancel,n=a===void 0?function(){}:a,i=o.onOk,c=i===void 0?function(){}:i,u=o.onFinish,l=u===void 0?function(){return Promise.resolve()}:u;return(0,r.jsxs)(re.Z,{"data-inspector-line":"29","data-inspector-column":"4","data-inspector-relative-path":"src/components/FileImportModal/index.tsx",title:R,visible:d,width:b,modalProps:{maskClosable:!1,onCancel:n,onOk:c},onFinish:l,children:[(0,r.jsx)(H.Z.Item,{"data-inspector-line":"40","data-inspector-column":"6","data-inspector-relative-path":"src/components/FileImportModal/index.tsx",children:(0,r.jsx)("a",{"data-inspector-line":"41","data-inspector-column":"8","data-inspector-relative-path":"src/components/FileImportModal/index.tsx",href:t,target:"_blank",rel:"noopener noreferrer",children:"\u70B9\u51FB\u4E0B\u8F7D\u6A21\u677F"})}),(0,r.jsx)(T.Z,{"data-inspector-line":"45","data-inspector-column":"6","data-inspector-relative-path":"src/components/FileImportModal/index.tsx",accept:".xlsx,.xls",label:"",name:"file",title:"\u4E0A\u4F20\u6587\u4EF6",max:1,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6587\u4EF6"}],fieldProps:{beforeUpload:function(){return!1}}}),(0,r.jsx)("p",{"data-inspector-line":"56","data-inspector-column":"6","data-inspector-relative-path":"src/components/FileImportModal/index.tsx",className:"ant-form-item-extra",children:"\u8BF7\u6309\u7167\u6A21\u677F\u683C\u5F0F\u8FDB\u884C\u5F55\u5165\uFF0C\u652F\u6301xlsx\u683C\u5F0F"})]})},K=M,A=e(23314),U=e(57254),Y=e(79416),$=e(35713),J=e(27052),L=e(2138),S=[{dataIndex:"index",width:48,hideInSearch:!0},{title:"\u6807\u9898",dataIndex:"title",copyable:!0,ellipsis:!0,filterType:"query",tip:"\u6807\u9898\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29"},{title:"\u72B6\u6001",dataIndex:"state",filters:!0,filterType:"query",onFilter:!0,valueType:"select",width:180,order:99,valueEnum:{all:{text:"\u5168\u90E8",status:"Default"},open:{text:"\u672A\u89E3\u51B3",status:"Error"},closed:{text:"\u5DF2\u89E3\u51B3",status:"Success",disabled:!0},processing:{text:"\u89E3\u51B3\u4E2D",status:"Processing"}}},{title:"\u6807\u7B7E",dataIndex:"labels",filterType:"light",renderFormItem:function(o,h){var d=h.defaultRender;return d(o)},render:function(o,h){return(0,r.jsx)(V.Z,{"data-inspector-line":"76","data-inspector-column":"6","data-inspector-relative-path":"src/pages/table/complex.tsx",children:h.labels.map(function(d){var s=d.name,R=d.color;return(0,r.jsx)(G.Z,{"data-inspector-line":"78","data-inspector-column":"10","data-inspector-relative-path":"src/pages/table/complex.tsx",color:R,children:s},s)})})}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"showTime",filterType:"light",dataIndex:"created_at",valueType:"dateTime",sorter:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"created_at",valueType:"dateRange",hideInTable:!0,hideInSearch:!0,search:{transform:function(o){return{startTime:o[0],endTime:o[1]}}}},{title:"\u64CD\u4F5C",valueType:"option",render:function(o,h,d,s){return[(0,r.jsx)("a",{"data-inspector-line":"112","data-inspector-column":"6","data-inspector-relative-path":"src/pages/table/complex.tsx",onClick:function(){var _;s==null||(_=s.startEditable)===null||_===void 0||_.call(s,h.id)},children:"\u7F16\u8F91"},"editable"),(0,r.jsx)("a",{"data-inspector-line":"120","data-inspector-column":"6","data-inspector-relative-path":"src/pages/table/complex.tsx",href:h.url,target:"_blank",rel:"noopener noreferrer",children:"\u67E5\u770B"},"view"),(0,r.jsx)($.Z,{"data-inspector-line":"123","data-inspector-column":"6","data-inspector-relative-path":"src/pages/table/complex.tsx",onSelect:function(){return s==null?void 0:s.reload()},menus:[{key:"copy",name:"\u590D\u5236"},{key:"delete",name:"\u5220\u9664"}]},"actionGroup")]}}],X=function(f){var o=(0,y.useState)([]),h=(0,O.Z)(o,2),d=h[0],s=h[1],R=(0,y.useState)(!1),_=(0,O.Z)(R,2),b=_[0],P=_[1],t=y.useRef(),a=(0,y.useRef)({});return(0,r.jsxs)(Y.ZP,{"data-inspector-line":"147","data-inspector-column":"4","data-inspector-relative-path":"src/pages/table/complex.tsx",fixedHeader:!0,affixProps:{offsetTop:48,children:null},header:{title:f.route.name,breadcrumb:{},extra:[(0,r.jsx)(C.Z,{"data-inspector-line":"154","data-inspector-column":"10","data-inspector-relative-path":"src/pages/table/complex.tsx",type:"primary",onClick:function(){J.m8.push("/form/basic")},children:"\u65B0\u5EFA"},"createBtn"),(0,r.jsx)(C.Z,{"data-inspector-line":"163","data-inspector-column":"10","data-inspector-relative-path":"src/pages/table/complex.tsx",type:"default",onClick:function(){P(!0)},children:"\u6279\u91CF\u5BFC\u5165"},"importBtn"),(0,r.jsx)(p.Z,{"data-inspector-line":"172","data-inspector-column":"10","data-inspector-relative-path":"src/pages/table/complex.tsx",overlay:(0,r.jsxs)(I.Z,{"data-inspector-line":"175","data-inspector-column":"14","data-inspector-relative-path":"src/pages/table/complex.tsx",onClick:function(){var n=(0,B.Z)(m().mark(function i(c){var u,l,g,x,Z,E;return m().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(u=c.key,u!=="selected"){F.next=8;break}if(d.length!==0){F.next=5;break}return N.default.error("\u8BF7\u5148\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E"),F.abrupt("return");case 5:a.current={idList:d},F.next=9;break;case 8:u==="params"&&(x=((l=t.current)===null||l===void 0||(g=l.pageInfo)===null||g===void 0?void 0:g.params)||{},Z=x.status,E=x.searchKey,a.current={idList:[],status:Z,searchKey:E});case 9:case"end":return F.stop()}},i)}));return function(i){return n.apply(this,arguments)}}(),children:[(0,r.jsx)(I.Z.Item,{"data-inspector-line":"197","data-inspector-column":"16","data-inspector-relative-path":"src/pages/table/complex.tsx",children:"\u5F53\u524D\u9009\u4E2D\u6570\u636E"},"selected"),(0,r.jsx)(I.Z.Item,{"data-inspector-line":"198","data-inspector-column":"16","data-inspector-relative-path":"src/pages/table/complex.tsx",children:"\u5F53\u524D\u67E5\u8BE2\u6761\u4EF6\u5168\u90E8\u6570\u636E"},"params")]}),children:(0,r.jsxs)(C.Z,{"data-inspector-line":"202","data-inspector-column":"12","data-inspector-relative-path":"src/pages/table/complex.tsx",type:"default",children:["\u5BFC\u51FA\u6570\u636E ",(0,r.jsx)(U.Z,{"data-inspector-line":"203","data-inspector-column":"19","data-inspector-relative-path":"src/pages/table/complex.tsx"})]})},"downloadBtn")]},children:[(0,r.jsx)(A.Z,{"data-inspector-line":"209","data-inspector-column":"6","data-inspector-relative-path":"src/pages/table/complex.tsx",columns:S,actionRef:t,request:(0,B.Z)(m().mark(function n(){var i,c=arguments;return m().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return i=c.length>0&&c[0]!==void 0?c[0]:{},l.abrupt("return",(0,L.ZP)("https://proapi.azurewebsites.net/github/issues",{params:i}));case 2:case"end":return l.stop()}},n)})),rowSelection:{selectedRowKeys:d,onChange:s},rowKey:"id",pagination:{pageSize:10},dateFormatter:"string"}),b&&(0,r.jsx)(K,{"data-inspector-line":"231","data-inspector-column":"8","data-inspector-relative-path":"src/pages/table/complex.tsx",title:"\u5BFC\u5165SP\u6570\u636E",visible:b,downloadUrl:"https://github.com/RootLinkFE/rh-template-react-umi.git",onCancel:function(){P(!1)},onFinish:function(){return Promise.resolve(!0)}})]})}}}]);
